<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <title>register</title>
</head>

<body>
    <div class="container mt-4">
        <form id="registerForm">
            <fieldset>
                <legend>회원가입</legend>
                <div class="mb-3">
                    <label for="name" class="form-label">이름</label>
                    <input type="text" id="name" class="form-control" name="name">
                </div>

                <div class="mb-3">
                    <label for="phone" class="form-label">전화번호</label>
                    <input type="text" id="phone" class="form-control" name="phone">
                </div>

                <div class="mb-3">
                    <label for="birthdate" class="form-label">생년월일</label>
                    <input type="date" id="birthdate" class="form-control" name="birthdate">
                </div>      
                
                <div class="mb-3">
                    <label for="email" class="form-label">이메일</label>
                    <input type="email" id="email" class="form-control" name="email">
                </div>

                <div class="mb-3">
                    <label for="id" class="form-label">아이디</label>
                    <input type="text" id="id" class="form-control" name="id">
                </div>
                <div class="mb-3">
                    <label for="pw" class="form-label">비밀번호</label>
                    <div class="input-group">
                        <input type="password" id="pw" class="form-control" name="pw">
                        <button type="button" id="togglePassword" class="btn btn-outline-secondary">
                            <i id="eyeIcon" class="bi bi-eye"></i>
                        </button>
                    </div>
                </div>
                <button type="submit" id="register" class="btn btn-outline-dark">회원가입</button>
                <a href="/member/login" class="btn btn-outline-primary">뒤로</a>
                <br><br>
                <a href="javascript:kakaoLogin();" class="btn btn-outline-dark">
                    <img src="data:image/png;base64,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" width = 100px height = 35px alt="Kakao Login">
                    카카오로 회원가입
                </a>
            </fieldset>
        </form>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.js"></script>
        <script src="https://developers.kakao.com/sdk/js/kakao.js"></script>

        <script>
            window.Kakao.init("3585dfdc26eb8686b36cb652a1410094");
    
            function kakaoLogin() {
                window.Kakao.Auth.login({
                    scope: 'profile_nickname',
                    success: function (authObj) {
                        console.log(authObj);
                        window.Kakao.API.request({
                            url: 'v2/user/me',
                            success: res => {
                                const kakao_account = res.kakao_account;
                                console.log(kakao_account);
                            },
                            fail: error => {
                                console.error(error);
                            }
                        });
                    },
                    fail: error => {
                        console.error(error);
                    }
                });
            }
    
            $(document).ready(function () {
                $('#togglePassword').click(function () {
                    const passwordField = $('#pw');
                    const eyeIcon = $('#eyeIcon');
    
                    // Toggle password visibility
                    if (passwordField.attr('type') === 'password') {
                        passwordField.attr('type', 'text');
                        eyeIcon.removeClass('bi-eye').addClass('bi-eye-slash');
                    } else {
                        passwordField.attr('type', 'password');
                        eyeIcon.removeClass('bi-eye-slash').addClass('bi-eye');
                    }
                });
    
                $('#register').click(() => {
                    const id = $('#id').val();
                    const pw = $('#pw').val();
    
                    $.ajax({
                        url: '/member/register',
                        method: 'POST',
                        data: { id: id, pw: pw },
                    }).done((result) => {
                        console.log(result);
                        console.log(result.message);
                    }).fail((jqXHR, textStatus, errorThrown) => {
                        console.error(textStatus, errorThrown);
                    });
                });
            });
        </script>
        

    <script>
        // 비밀번호 가시성 토글
        document.getElementById('togglePassword').addEventListener('click', function() {
            const pwField = document.getElementById('pw');
            const pwFieldType = pwField.getAttribute('type') === 'password' ? 'text' : 'password';
            pwField.setAttribute('type', pwFieldType);

            // 아이콘 변경
            const eyeIcon = document.getElementById('eyeIcon');
            eyeIcon.classList.toggle('bi-eye');
            eyeIcon.classList.toggle('bi-eye-slash');
        });

        // 회원가입 폼 제출 시 Ajax 요청
        document.getElementById('registerForm').addEventListener('submit', function(event) {
            event.preventDefault();

            const formData = {
                name: document.getElementById('name').value,
                phone: document.getElementById('phone').value,
                birthdate: document.getElementById('birthdate').value,
                email: document.getElementById('email').value,
                id: document.getElementById('id').value,
                pw: document.getElementById('pw').value,
            };

            $.ajax({
                type: 'POST',
                url: '/member/register',
                data: JSON.stringify(formData),
                contentType: 'application/json',
                success: function(response) {
                    alert(response.message);
                    window.location.href = '/member/login';
                },
                error: function(xhr, status, error) {
                    alert('Registration failed: ' + xhr.responseText);
                }
            });
        });
    </script>
</body>
</html>